<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Головна сторінка</title>
    <link rel="stylesheet" href="./css/index.css" />
    <link rel="stylesheet" href="./css/global.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="bg-top"></div>
    <header class="container justify_between">
      <a href="/">
        <img
          src="./assets/images/logo.svg"
          alt="logo"
          width="200"
          height="30"
        />
      </a>
      <nav class="h_nav align_center">
        <a href="/">Головна</a>
        <div class="h_select">
          <div class="align_center">
            <span>Штори</span>
            <img
              src="./assets/images/header/arrow.svg"
              alt="arrow"
              height="12"
              width="6"
            />
          </div>
          <div></div>
        </div>
        <div class="h_select">
          <div class="align_center">
            <span>Тюль</span>
            <img
              src="./assets/images/header/arrow.svg"
              alt="arrow"
              height="12"
              width="6"
            />
          </div>
          <div></div>
        </div>
        <div class="h_select">
          <div class="align_center">
            <span>Тасьма</span>
            <img
              src="./assets/images/header/arrow.svg"
              alt="arrow"
              height="12"
              width="6"
            />
          </div>
          <div></div>
        </div>
        <a href="/catalog">Інше</a>
        <a href="/cart">
          <img
            src="./assets/images/header/cart.svg"
            alt="cart"
            height="21"
            width="24"
          />
        </a>
      </nav>
      <div class="h_burger">
        <img
          src="./assets/images/header/burger.svg"
          alt="burger"
          width="26"
          height="17"
        />
        <div></div>
      </div>
    </header>
    <main>
      <div id="contact-modal">
        <div id="contact-modal-child">
          <img
            src="./assets/images/home/close.svg"
            alt="close"
            width="21"
            height="21"
            onclick="contactClose()"
          />
          <h2>Зв'язатися</h2>
          <form onsubmit="contactSubmit(event)">
            <fieldset>
              <label for="name" class="req">Ім’я</label>
              <input
                type="text"
                name="name"
                placeholder="Валентин(a)"
                class="input-ds"
                id="name-check"
                oninput="onChangeName(event)"
                onblur="onBlurName(event)"
              />
            </fieldset>
            <fieldset>
              <label for="phone">Телефон</label>
              <input
                type="tel"
                name="phone"
                placeholder="+380 xx xxx xx xx"
                class="input-ds"
              />
            </fieldset>
            <fieldset>
              <label for="email" class="req">Пошта</label>
              <input
                type="email"
                name="email"
                placeholder="example@gmail.com"
                class="input-ds"
                id="email-check"
                oninput="onChangeEmail(event)"
                onblur="onBlurEmail(event)"
              />
            </fieldset>
            <fieldset>
              <label for="message" class="req">Повідомлення</label>
              <textarea
                name="message"
                class="input-ds"
                id="mess-check"
                oninput="onChangeMess(event)"
                onblur="onBlurMess(event)"
              ></textarea>
            </fieldset>
            <button type="submit" class="button-tr" id="contact-btn-d">
              Відправити
            </button>
          </form>
        </div>
      </div>
      <div class="lv1 container">
        <div>
          <h1>Пошив під замовлення штор та тюль</h1>
          <p>
            Наші майстри з шиття створять для вас неповторні штори, тюлі та
            тасьми, які додають затишку і стилю вашому приміщенню.
          </p>
          <a href="/catalog"><button class="button-bg">Каталог</button></a>
        </div>
        <img
          src="./assets/images/home/top.png"
          alt="top-img"
          width="519"
          height="680"
        />
      </div>
      <div class="lv2">
        <div class="container">
          <h2>Трохи про нас</h2>
          <p>
            Привіт! Ми - команда інтернет-магазину, яка спеціалізується на
            шторах, тюлях, тасьмах та індивідуальному пошитті. Наша мета -
            зробити ваш дім ще затишнішим та стильнішим, надаючи вам можливість
            створити простір, який відображатиме ваші уподобання та особливості.
          </p>
          <p>
            Ми розуміємо, що вибір текстилю для вашого домашнього інтер'єру - це
            важливе завдання, тому пропонуємо вам широкий вибір матеріалів і
            кольорів. Наші фахівці з радістю нададуть вам професійні поради щодо
            вибору і дизайну, щоб кожен елемент вашого простору відображав ваш
            стиль та персональність.
          </p>
          <p>
            Приєднуйтесь до нашої спільноти, де ми не лише пропонуємо вам
            високоякісні товари, а й ділимося корисними порадами та ідеями з
            декорування вашого дому. Разом з нами ви зможете створити простір
            вашої мрії, в якому кожен день буде наповнений комфортом та
            гармонією. Долучайтеся та відкрийте для себе нові можливості дизайну
            вашого дому разом з нашим інтернет-магазином!
          </p>
        </div>
      </div>
      <div class="lv3 container">
        <h2>Фото клієнтів</h2>
        <div id="imagesGallery"></div>
        <div class="pagination">
          <button class="arrow" onclick="prevSlide()" id="arrow-left">
            <img
              src="./assets/images/arrow-left.svg"
              alt="arrow-left"
              width="17"
              height="20"
            />
          </button>
          <div class="list"></div>
          <button class="arrow" onclick="nextSlide()" id="arrow-right">
            <img
              src="./assets/images/arrow-right.svg"
              alt="arrow-right"
              width="17"
              height="20"
            />
          </button>
        </div>
      </div>
      <div class="lv4">
        <div class="container">
          <h2>Відгуки</h2>
          <div id="slide-b">
            <div>
              <div>
                <h3>Софія Гулевская</h3>
                <p>
                  Вибрала тут чудові штори в кімнату.<br />Ціна приємно
                  здивувала якість гарна.<br />Мені дуже сподобався цей
                  магазин.<br />Рекомендую всім хто хоче придбати гарні штори за
                  хорошою ціною.
                </p>
              </div>
              <div>
                <h3>Анастасия Юренко</h3>
                <p>
                  Купувала штори. Широкий вибір товару, допомогли вибрати
                  потрібний варіант.<br />Гарне обслуговування і ціни.<br />Штори
                  гарної якості, рекомендую.
                </p>
              </div>
              <div>
                <h3>Анна Севрюкова</h3>
                <p>
                  Обслуговування на найвищому рівні! Сучасний вибір якісних
                  тканин. Штори вийшли шикарні!
                </p>
              </div>
            </div>
            <div>
              <div>
                <h3>Софія Дмитрієвич</h3>
                <p>
                  Дуже вдячна Вам за вашу роботу! В мене проблемне еркерне вікно
                  з різною висотою.<br />В багатьох магазинах казали що не
                  реально зробити те що я хотіла. Але тут змогли не лише
                  підібрати і ідеально встановити карнизи, а ще й підібрати і
                  пошити тюль та штори за моїм бажанням. Вийшло просто чудово!
                  Всім, хто й досі думає, що їхні задуми майже неможливо
                  втілити, нехай переконається в зворотному, звернувшись до
                  цього магазину!!
                </p>
              </div>
              <div>
                <h3>Світлана Окань</h3>
                <p>
                  Чудовий магазин! Прекрасний персонал та величезний асортимент.
                  Допомогли з вибором, виготовили все в терміни, штори дуже
                  красиві, довжина підібрана ідеально.<br />Без поспіху все
                  показали, порадили,розповіли як правильно вішати. З Вами дуже
                  приємно мати справу! Дякую за вашу роботу!
                </p>
              </div>
            </div>
          </div>
          <div class="justify_center">
            <a
              target="_blank"
              href="https://www.google.com/maps/place/%D0%93%D0%B0%D0%BB%D0%B5%D1%80%D0%B5%D1%8F+%D0%A8%D1%82%D0%BE%D1%80/@49.5654233,34.5100339,15z/data=!4m18!1m9!3m8!1s0x40d82f2bfeed0a73:0xc08dbc25d777df10!2z0JPQsNC70LXRgNC10Y8g0KjRgtC-0YA!8m2!3d49.5654233!4d34.5100339!9m1!1b1!16s%2Fg%2F11h80226zl!3m7!1s0x40d82f2bfeed0a73:0xc08dbc25d777df10!8m2!3d49.5654233!4d34.5100339!9m1!1b1!16s%2Fg%2F11h80226zl?entry=ttu"
              >Більше відгуків</a
            >
          </div>
        </div>
      </div>
      <div class="lv5 container">
        <h2>Зв'язатися</h2>
        <div class="info_contact">
          <label for="">Адресса</label>
          <p>Полтава, вулиця Івана Мазепи, 17</p>
        </div>
        <div class="info_contact">
          <label for="">Години праці</label>
          <p>Щоденно з 9:30 до 18:30</p>
        </div>
        <div class="info_contact">
          <label for="">Телефон</label>
          <p>+380 050 862 7508</p>
        </div>
        <div class="info_contact">
          <label for="">Пошта</label>
          <p>figma.ua@gmail.com</p>
        </div>
        <button class="button-tr" onclick="contactGet()">Зв'язатися</button>
        <iframe
          title="geolocation"
          src="https://maps.google.com/maps?q=ул.+Ивана+Мазепы,+17,+Полтава,+Полтавская+область,+36000&amp;t=&amp;z=18&amp;ie=UTF8&amp;iwloc=&amp;output=embed"
          frameborder="0"
          loading="lazy"
          width="200%"
          height="430"
          allowfullscreen
        ></iframe>
      </div>
    </main>
    <div class="req-br">
      <img src="./assets/images/req.svg" alt="req-br" width="13" height="24" />
    </div>
    <footer>Copyright © 2024 “Галерея штор”. Усі права захищені.</footer>

    <script>
      let validName = false;
      let validEmail = false;
      let validMess = false;

      function eventBlockClose(e) {
        if (!e.target.closest("#contact-modal-child")) contactClose();
      }

      function contactGet() {
        document.getElementById("contact-modal").classList.add("active");

        setTimeout(
          () => document.addEventListener("click", eventBlockClose),
          500
        );
      }

      function contactClose() {
        document.getElementById("contact-modal").classList.remove("active");

        document.removeEventListener("click", eventBlockClose);
      }

      function onChangeName(event) {
        if (event.target.value === "") {
          document.getElementById("name-check").classList.add("error");
          validName = false;
        } else {
          document.getElementById("name-check").classList.remove("error");
          validName = true;
        }
      }
      function onBlurName(event) {
        if (event.target.value === "")
          document.getElementById("name-check").classList.add("error");
      }

      function onChangeEmail(event) {
        const emailPattern =
          /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

        if (
          event.target.value === "" ||
          !emailPattern.test(event.target.value)
        ) {
          document.getElementById("email-check").classList.add("error");
          validEmail = false;
        } else {
          document.getElementById("email-check").classList.remove("error");
          validEmail = true;
        }
      }
      function onBlurEmail(event) {
        if (event.target.value === "")
          document.getElementById("email-check").classList.add("error");
      }

      function onChangeMess(event) {
        if (event.target.value === "") {
          document.getElementById("mess-check").classList.add("error");
          validMess = false;
        } else {
          document.getElementById("mess-check").classList.remove("error");
          validMess = true;
        }
      }
      function onBlurMess(event) {
        if (event.target.value === "")
          document.getElementById("mess-check").classList.add("error");
      }

      function contactSubmit(event) {
        event.preventDefault();

        if (!validName) {
          document.getElementById("name-check").classList.add("error");
        }

        if (!validEmail) {
          document.getElementById("email-check").classList.add("error");
        }

        if (!validMess) {
          document.getElementById("mess-check").classList.add("error");
        }

        if (validEmail && validMess && validName) {
          document.getElementById("contact-btn-d").disabled = true;

          const formData = new FormData(event.target);

          fetch("./server/mail/contact_send.php", {
            method: "POST",
            body: formData,
          }).then((response) => {
            document.getElementById("contact-btn-d").disabled = false;
            if (response.ok) {
              contactClose();
            }
          });
        }
      }
    </script>

    <script>
      let countImage = 1;
      let index = 1;
      const screenWidth = window.innerWidth;
      let listImage = [];

      function calculateImagesToShow() {
        if (screenWidth > 1000) {
          return 6;
        } else if (screenWidth > 760) {
          return 4;
        } else {
          return 1;
        }
      }

      fetch("./server/slider/slider.php", {
        method: "GET",
        headers: {
          "Content-Type": "application/json",
        },
      })
        .then((response) => response.json())
        .then((images) => {
          listImage = images;
          countImage = images.length;
          const imageGallery = document.getElementById("imagesGallery");
          const listPag = document.getElementsByClassName("list");

          const count = calculateImagesToShow();
          let pageCount = Math.floor(countImage / count);

          if (pageCount <= 1) {
            document.getElementById("arrow-left").disabled = true;
            document.getElementById("arrow-right").disabled = true;
          }

          if (count === 1 && pageCount > 7) pageCount = 7;

          for (let i = 1; i <= pageCount; i++) {
            const div = document.createElement("div");
            div.id = `page-${i}`;
            if (i === 1) div.className = "active";
            listPag[0].appendChild(div);
          }

          images.forEach((image, i) => {
            if (i < count) {
              const imageName = image.split(".")[0];
              const img = document.createElement("img");
              img.src = `./assets/images/home/list/${image}`;
              img.alt = imageName;
              img.id = `img-${imageName}`;
              imageGallery.appendChild(img);
            }
          });
        })
        .catch((error) => console.error("Ошибка загрузки изображений:", error));

      function changeSlide(direction) {
        const imageGallery = document.getElementById("imagesGallery");
        const count = calculateImagesToShow();
        const pageCount = Math.ceil(countImage / count);

        let newIndex;

        if (direction === "prev") {
          newIndex = index - count;
          if (newIndex < 1) {
            newIndex += countImage;
          }
        } else if (direction === "next") {
          newIndex = index + count;
          if (newIndex > countImage) {
            newIndex -= countImage;
          }
        }

        index = newIndex;

        const paginationBlocks = document.querySelectorAll(".list > div");
        paginationBlocks.forEach((block) => block.classList.remove("active"));

        const currentPage = Math.ceil(index / count);
        const activePage = document.getElementById(`page-${currentPage}`);
        if (activePage) {
          activePage.classList.add("active");
        }

        imageGallery.innerHTML = "";

        for (let i = index; i < index + count; i++) {
          const imgIndex = i > countImage ? i - countImage : i;
          const imageName = listImage[imgIndex - 1].split(".")[0];
          const img = document.createElement("img");
          img.src = `./assets/images/home/list/${listImage[imgIndex - 1]}`;
          img.alt = imageName;
          img.id = `img-${imageName}`;
          imageGallery.appendChild(img);
        }
      }

      function prevSlide() {
        changeSlide("prev");
      }

      function nextSlide() {
        changeSlide("next");
      }
    </script>

    <script>
      if (window.innerWidth <= 760) {
        let slideB = document.getElementById("slide-b");
        let isTouchSlideB = false;
        let startSlideX = 0;
        let startTranslateX = 0;
        let sliderWidth = slideB.scrollWidth;
        let sliderOffset = slideB.offsetWidth;

        function changeTouchedB(isTouch) {
          isTouchSlideB = isTouch;
          if (!isTouch) {
            startSlideX = 0;
            startTranslateX =
              parseInt(
                slideB.style.transform
                  .replace("translateX(", "")
                  .replace("px)", "")
              ) || 0;
          }
        }

        function slideMoveB(e) {
          if (isTouchSlideB) {
            const currentX = e.clientX || e.touches[0].clientX;
            if (startSlideX !== 0) {
              const diff = currentX - startSlideX;
              let newTranslateX = startTranslateX + diff;
              if (newTranslateX >= 0) newTranslateX = 0;
              else if (newTranslateX <= -(sliderWidth - sliderOffset))
                newTranslateX = -(sliderWidth - sliderOffset);
              slideB.style.transform = `translateX(${newTranslateX}px)`;
            }
          }
        }

        slideB.addEventListener("mousedown", (e) => {
          changeTouchedB(true);
          startSlideX = e.clientX;
          slideB.style.cursor = "grabbing";
        });
        slideB.addEventListener("mousemove", slideMoveB);
        slideB.addEventListener("mouseup", () => {
          changeTouchedB(false);
          slideB.style.removeProperty("cursor");
        });
        slideB.addEventListener("touchstart", (e) => {
          changeTouchedB(true);
          startSlideX = e.clientX;
          slideB.style.cursor = "grabbing";
        });
        slideB.addEventListener("touchmove", slideMoveB);
        slideB.addEventListener("touchend", () => {
          changeTouchedB(false);
          slideB.style.removeProperty("cursor");
        });
      }
    </script>
  </body>
</html>
